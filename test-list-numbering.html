<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ—è¡¨ç¼–å·ä¿®å¤æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
        }
        .demo-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
        .problem-box {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .fix-box {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .test-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        .before, .after {
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid;
        }
        .before {
            border-color: #ef4444;
            background: #fef2f2;
        }
        .after {
            border-color: #10b981;
            background: #f0fdf4;
        }
        .example-list {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        .highlight {
            background: #fef3c7;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-weight: 600;
        }
        .code-fix {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="demo-container">
        <div class="problem-box">
            <h1 class="text-2xl font-bold mb-4">ğŸ”§ åˆ—è¡¨ç¼–å·é‡å¤é—®é¢˜å·²ä¿®å¤</h1>
            <p class="text-lg opacity-90">è§£å†³äº†æœ‰åºåˆ—è¡¨æ¸²æŸ“æ—¶å‡ºç°é‡å¤ç¼–å·çš„bug</p>
        </div>

        <div class="test-section">
            <h2 class="text-xl font-semibold mb-4">ğŸ› é—®é¢˜æè¿°</h2>
            <p class="mb-4">ä¹‹å‰åœ¨æ¸²æŸ“Notioné¡µé¢æ—¶ï¼Œå½“æœ‰åºåˆ—è¡¨è¢«åˆ†æ‰¹åŠ è½½æˆ–åˆ†æ®µæ˜¾ç¤ºæ—¶ï¼Œä¼šå‡ºç°ç¼–å·é‡å¤çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼š</p>
            
            <div class="before-after">
                <div class="before">
                    <h4 class="font-semibold mb-2 text-red-700">ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰</h4>
                    <ol class="example-list list-decimal">
                        <li>ç¬¬ä¸€é¡¹å†…å®¹</li>
                        <li>ç¬¬äºŒé¡¹å†…å®¹</li>
                    </ol>
                    <p class="text-sm text-gray-600 my-2">-- é¡µé¢åˆ†æ‰¹åŠ è½½å --</p>
                    <ol class="example-list list-decimal">
                        <li class="text-red-600 font-semibold">é‡å¤çš„ç¼–å·2ï¼ˆåº”è¯¥æ˜¯3ï¼‰</li>
                        <li class="text-red-600 font-semibold">é‡å¤çš„ç¼–å·3ï¼ˆåº”è¯¥æ˜¯4ï¼‰</li>
                    </ol>
                </div>
                
                <div class="after">
                    <h4 class="font-semibold mb-2 text-green-700">ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰</h4>
                    <ol class="example-list list-decimal">
                        <li>ç¬¬ä¸€é¡¹å†…å®¹</li>
                        <li>ç¬¬äºŒé¡¹å†…å®¹</li>
                    </ol>
                    <p class="text-sm text-gray-600 my-2">-- é¡µé¢åˆ†æ‰¹åŠ è½½å --</p>
                    <ol class="example-list list-decimal" start="3">
                        <li class="text-green-600 font-semibold">æ­£ç¡®çš„ç¼–å·3</li>
                        <li class="text-green-600 font-semibold">æ­£ç¡®çš„ç¼–å·4</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="text-xl font-semibold mb-4">ğŸ”§ æŠ€æœ¯ä¿®å¤</h2>
            <p class="mb-4">æˆ‘ä»¬åœ¨ä»¥ä¸‹ä¸‰ä¸ªå…³é”®å‡½æ•°ä¸­ä¿®å¤äº†ç¼–å·è®¡ç®—é€»è¾‘ï¼š</p>
            
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold mb-2">1. renderBlocks() å‡½æ•°</h4>
                    <div class="code-fix">
                        <div class="text-green-600">+ let orderedListStart = 1; // è¿½è¸ªå½“å‰æœ‰åºåˆ—è¡¨çš„èµ·å§‹ç¼–å·</div>
                        <div class="text-green-600">+ if (listTag === 'ol') {</div>
                        <div class="text-green-600">+     content += `&lt;ol start="${orderedListStart}"&gt;`;</div>
                        <div class="text-green-600">+     orderedListStart++;</div>
                        <div class="text-green-600">+ }</div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-2">2. renderIncrementalBlocks() å‡½æ•°</h4>
                    <div class="code-fix">
                        <div class="text-green-600">+ const orderedListStart = calculateOrderedListStart(pageContent, loadingIndicator);</div>
                        <div class="text-green-600">+ processedContent += `&lt;ol start="${orderedListStart}"&gt;`;</div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-2">3. renderFinalBatch() å‡½æ•°</h4>
                    <div class="code-fix">
                        <div class="text-green-600">+ if (listTag === 'ol') {</div>
                        <div class="text-green-600">+     const orderedListStart = calculateOrderedListStart(pageContent, loadingIndicator);</div>
                        <div class="text-green-600">+     processedContent += `&lt;ol start="${orderedListStart}"&gt;`;</div>
                        <div class="text-green-600">+ }</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="text-xl font-semibold mb-4">âœ… ä¿®å¤æ•ˆæœ</h2>
            <ul class="list-disc list-inside space-y-2">
                <li><strong>ç¼–å·è¿ç»­æ€§</strong>ï¼šç¡®ä¿æœ‰åºåˆ—è¡¨åœ¨åˆ†æ‰¹åŠ è½½æ—¶ç¼–å·è¿ç»­</li>
                <li><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å‰ä¸€ä¸ªåˆ—è¡¨çš„ç»“æŸç¼–å·</li>
                <li><strong>æ™ºèƒ½é‡ç½®</strong>ï¼šéåˆ—è¡¨å†…å®¹ä¼šé‡ç½®ç¼–å·è®¡æ•°å™¨</li>
                <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…äº†ä¸å¿…è¦çš„DOMé‡è®¡ç®—</li>
            </ul>
        </div>

        <div class="test-section">
            <h2 class="text-xl font-semibold mb-4">ğŸ§ª å¦‚ä½•æµ‹è¯•</h2>
            <ol class="list-decimal list-inside space-y-2">
                <li>è®¿é—®åŒ…å«æœ‰åºåˆ—è¡¨çš„Notioné¡µé¢</li>
                <li>ç¡®ä¿é¡µé¢å†…å®¹è¾ƒé•¿ï¼Œä¼šè§¦å‘åˆ†æ‰¹åŠ è½½</li>
                <li>è§‚å¯Ÿåˆ—è¡¨ç¼–å·æ˜¯å¦è¿ç»­</li>
                <li><span class="highlight">ç¡®è®¤ä¸å†å‡ºç°é‡å¤ç¼–å·çš„é—®é¢˜ï¼</span></li>
            </ol>
        </div>

        <div class="test-section">
            <h2 class="text-xl font-semibold mb-4">ğŸ“‹ ä¿®æ”¹æ–‡ä»¶</h2>
            <p class="mb-3">ä¸»è¦ä¿®æ”¹äº†ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
            <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
                <li><code class="bg-gray-200 px-2 py-1 rounded">static/js/modules/notionRenderer.js</code></li>
                <li>ä¿®å¤äº† renderBlocks() å‡½æ•°çš„ç¼–å·é€»è¾‘</li>
                <li>ä¿®å¤äº† renderFinalBatch() å‡½æ•°çš„èµ·å§‹ç¼–å·è®¡ç®—</li>
                <li>ä¼˜åŒ–äº† renderIncrementalBlocks() å‡½æ•°çš„ç¼–å·ç»­æ¥</li>
            </ul>
        </div>

        <div class="fix-box">
            <h3 class="text-lg font-semibold mb-2">ğŸ‰ é—®é¢˜å·²å½»åº•è§£å†³</h3>
            <p>ç°åœ¨æœ‰åºåˆ—è¡¨çš„ç¼–å·å°†å§‹ç»ˆä¿æŒè¿ç»­ï¼Œä¸ä¼šå†å‡ºç°é‡å¤ç¼–å·çš„æƒ…å†µï¼</p>
        </div>
    </div>
</body>
</html> 